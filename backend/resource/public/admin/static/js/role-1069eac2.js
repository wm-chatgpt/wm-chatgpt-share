import{i as e}from"./index.umd.min-b551c2d1.js";import"./browser-2d7b7d5f.js";import"./vue-echarts-bffdbdc9.js";import"./element-plus-cc31d756.js";import"./store-acbd10e3.js";import{a as t}from"./index-dd9d36be.js";import{u as l}from"./index-5926ad47.js";import{d as r,p as a,W as o,o as s,c as n,b as i,a as p,J as c,I as u}from"./@vue.runtime-core-6173334e.js";import{r as m}from"./@vue.reactivity-54707199.js";import{_ as d}from"./_plugin-vue_export-helper-1b428a4d.js";import"./axios-bb93cf32.js";import"./vue-21f38777.js";import"./@vue.runtime-dom-532828a1.js";import"./@vue.shared-0cc4c744.js";import"./monaco-editor-89e755bd.js";import"./nprogress-27d9be10.js";import"./lodash-es-fd5b777b.js";import"./vue-router-25454f45.js";import"./@vueuse.core-cb7ad152.js";import"./@vueuse.shared-feb01f08.js";import"./pinia-77f7f468.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-005b47e8.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@element-plus.icons-vue-2c9f4d7f.js";import"./@popperjs.core-b696b006.js";import"./@ctrl.tinycolor-a951068a.js";import"./dayjs-f8876307.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const h={class:"menu-check"},v={class:"menu-check__scroller"},f=r({name:"menu-check"}),j=d(r({...f,props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(r,{emit:u}){const d=r,{service:f}=l(),j=m(),y=m(),b=m("");function k(e,t){return!e||t.name.includes(e)}function _(e,{checkedKeys:t,halfCheckedKeys:l}){u("update:modelValue",[...t,...l])}return a(b,(e=>{j.value.filter(e)})),e.useUpsert({async onOpened(){await async function(){return f.base.sys.menu.list().then((e=>{y.value=t(e)}))}(),j.value.setCheckedKeys((d.modelValue||[]).filter((e=>{var t;return null==(t=j.value.getNode(e))?void 0:t.isLeaf})))}}),(e,t)=>{const l=o("el-input"),r=o("el-tree"),a=o("el-scrollbar");return s(),n("div",h,[i(l,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),placeholder:"输入关键字进行过滤"},null,8,["modelValue"]),p("div",v,[i(a,{"max-height":"200px"},{default:c((()=>[i(r,{ref_key:"Tree",ref:j,"node-key":"id","show-checkbox":"",data:y.value,props:{label:"name",children:"children"},"filter-node-method":k,onCheck:_},null,8,["data"])])),_:1})])])}}}),[["__scopeId","data-v-85a9ecd3"]]),y={class:"dept-check"},b={class:"dept-check__search"},k={class:"dept-check__tree"},_=r({name:"dept-check"}),x=d(r({..._,props:{modelValue:{type:Array,default:()=>[]},checkStrictly:Boolean},emits:["update:modelValue"],setup(r,{emit:u}){const d=r,{service:h}=l(),v=m(),f=m(),j=m("");function _(e,t){return!e||t.name.includes(e)}function x(e,{checkedKeys:t}){u("update:modelValue",t)}return a(j,(e=>{v.value.filter(e)})),e.useUpsert({async onOpened(){await async function(){return h.base.sys.department.list().then((e=>{f.value=t(e)}))}(),v.value.setCheckedKeys(d.modelValue||[])}}),(e,t)=>{const l=o("el-input"),a=o("el-tree"),u=o("el-scrollbar");return s(),n("div",y,[p("div",b,[i(l,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e),placeholder:"输入关键字进行过滤"},null,8,["modelValue"])]),p("div",k,[i(u,{"max-height":"200px"},{default:c((()=>[i(a,{ref_key:"Tree",ref:v,"node-key":"id","show-checkbox":"",data:f.value,props:{label:"name",children:"children"},"filter-node-method":_,"check-strictly":r.checkStrictly,onCheck:x},null,8,["data","check-strictly"])])),_:1})])])}}}),[["__scopeId","data-v-991eb561"]]),V=p("span",{style:{marginLeft:"10px",fontSize:"12px"}},"是否关联上下级",-1),w=r({name:"sys-role"}),g=r({...w,setup(t){const{service:r}=l(),a=e.useCrud({service:r.base.sys.role},(e=>{e.refresh()})),n=e.useUpsert({dialog:{width:"800px"},items:[{prop:"name",label:"名称",span:12,required:!0,component:{name:"el-input"}},{prop:"label",label:"标识",span:12,required:!0,component:{name:"el-input"}},{prop:"remark",label:"备注",span:24,component:{name:"el-input",props:{type:"textarea",rows:4}}},{label:"功能权限",prop:"menuIdList",value:[],component:{vm:j}},{label:"数据权限",prop:"relevance",flex:!1,component:{name:"slot-relevance"}},{label:"",prop:"departmentIdList",value:[],component:{vm:x,style:{marginTop:"-10px"}}}],onOpened(e){m(e.relevance||0)}}),p=e.useTable({columns:[{type:"selection",width:60},{prop:"name",label:"名称",minWidth:150},{prop:"label",label:"标识",minWidth:120},{prop:"remark",label:"备注",showOverflowTooltip:!0,minWidth:150},{prop:"createTime",label:"创建时间",sortable:"custom",minWidth:160},{prop:"updateTime",label:"更新时间",sortable:"custom",minWidth:160},{label:"操作",type:"op",buttons:["edit","delete"]}]});function m(e){var t;null==(t=n.value)||t.setProps("departmentIdList",{checkStrictly:0==e})}return(e,t)=>{const l=o("cl-refresh-btn"),r=o("cl-add-btn"),d=o("cl-multi-delete-btn"),h=o("cl-flex1"),v=o("cl-search-key"),f=o("cl-row"),j=o("cl-table"),y=o("cl-pagination"),b=o("el-switch"),k=o("cl-upsert"),_=o("cl-crud");return s(),u(_,{ref_key:"Crud",ref:a},{default:c((()=>[i(f,null,{default:c((()=>[i(l),i(r),i(d),i(h),i(v)])),_:1}),i(f,null,{default:c((()=>[i(j,{ref_key:"Table",ref:p,"default-sort":{prop:"createTime",order:"descending"}},null,512)])),_:1}),i(f,null,{default:c((()=>[i(h),i(y)])),_:1}),i(k,{ref_key:"Upsert",ref:n},{"slot-relevance":c((({scope:e})=>[i(b,{modelValue:e.relevance,"onUpdate:modelValue":t=>e.relevance=t,"active-value":1,"inactive-value":0,onChange:m},null,8,["modelValue","onUpdate:modelValue"]),V])),_:1},512)])),_:1},512)}}});export{g as default};
