import{d as e,o as t,c as o,M as n}from"./@vue.runtime-core-6173334e.js";import{_ as i}from"./_plugin-vue_export-helper-1b428a4d.js";import"./@vue.reactivity-54707199.js";import"./@vue.shared-0cc4c744.js";const r=e({props:{publicKey:{type:String,default:""},mode:{type:String,default:""},selector:{type:String,default:null},nonce:{type:String,default:""},arkosUrl:{type:String,default:"https://client-api.arkoselabs.com"}},data:()=>({scriptId:""}),beforeCreate(){},created(){},beforeMount(){},mounted(){this.scriptId=`arkose-script-${this.publicKey}`;const e=this.loadScript(this.publicKey,this.nonce);e.onload=()=>{window.setupEnforcement=this.setupEnforcement.bind(this)},e.onerror=()=>{}},beforeUpdate(){},updated(){},beforeUnmount(){},unmounted(){window.myEnforcement&&delete window.myEnforcement,window.setupEnforcement&&delete window.setupEnforcement,this.removeScript()},methods:{removeScript(){const e=document.getElementById(this.scriptId);e&&e.remove()},loadScript(e,t){this.removeScript();const o=document.createElement("script");return o.id=this.scriptId,o.type="text/javascript",o.src=`${this.arkosUrl}/v2/${e}/api.js`,o.setAttribute("data-callback","setupEnforcement"),o.async=!0,o.defer=!0,t&&o.setAttribute("data-nonce",t),document.body.appendChild(o),o},setupEnforcement(e){window.myEnforcement=e,window.myEnforcement.setConfig({selector:this.selector,mode:this.mode,onReady:()=>{this.$emit("onReady")},onShown:()=>{this.$emit("onShown")},onShow:()=>{this.$emit("onShow")},onSuppress:()=>{this.$emit("onSuppress")},onCompleted:e=>{this.$emit("onCompleted",e.token)},onReset:()=>{this.$emit("onReset")},onHide:()=>{this.$emit("onHide")},onError:e=>{this.$emit("onError",e)},onFailed:e=>{this.$emit("onFailed",e)}})}},watchEffect(){}}),s=["id"];const d=i(r,[["render",function(e,i,r,d,c,m){var p;return"inline"===e.mode?(t(),o("div",{key:0,id:null==(p=e.selector)?void 0:p.slice(1)},null,8,s)):n("",!0)}]]);export{d as default};
