import{Q as e}from"./quill-6d07e77f.js";import{p as o}from"./index-dd9d36be.js";import{d as l,p as t,e as i,W as a,o as n,c as r,a as d,b as s}from"./@vue.runtime-core-6173334e.js";import{r as u}from"./@vue.reactivity-54707199.js";import{_ as c}from"./_plugin-vue_export-helper-1b428a4d.js";import{p as m}from"./@vue.shared-0cc4c744.js";import"./axios-bb93cf32.js";import"./store-acbd10e3.js";import"./lodash-es-fd5b777b.js";const p=l({name:"cl-editor-quill",props:{modelValue:null,options:Object,height:{type:[String,Number],default:400},disabled:Boolean},emits:["update:modelValue","load"],setup(l,{emit:a}){let n=null;const r=u(),d=u(),s=u(),c=u(""),m=u(0);function p(e){if(l.disabled)return!1;const o=n.getSelection();o&&(m.value=o.index),"image"==e?d.value.open():"video"==e&&s.value.open()}function f(e){n.root.innerHTML=e||""}return t((()=>l.modelValue),(e=>{e?e!==c.value&&f(e):f("")})),i((function(){n=new e(r.value,{theme:"snow",placeholder:"输入内容",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","video","image"]]},...l.options}),n.getModule("toolbar").addHandler("image",(()=>{p("image")})),n.getModule("toolbar").addHandler("video",(()=>{p("video")})),n.on("text-change",(()=>{c.value=n.root.innerHTML,a("update:modelValue",c.value)})),f(l.modelValue),n.container.style.height=o(l.height),n.enable(!l.disabled),a("load",n)})),{Editor:r,ImageSpace:d,VideoSpace:s,content:c,quill:n,cursorIndex:m,setContent:f,onFileConfirm:function(o){o.length>0&&(o.forEach(((o,l)=>{"image"==o.type&&n.insertEmbed(m.value+l,o.type,o.url,e.sources.USER)})),n.setSelection(m.value+o.length))}}}}),f={ref:"Editor",class:"editor"};const g=c(p,[["render",function(e,o,l,t,i,u){const c=a("cl-upload-space");return n(),r("div",{class:m(["cl-editor-quill",{disabled:e.disabled}])},[d("div",f,null,512),s(c,{ref:"ImageSpace",accept:"image/*","show-btn":!1,onConfirm:e.onFileConfirm},null,8,["onConfirm"]),s(c,{ref:"VideoSpace",accept:"video/*","show-btn":!1,onConfirm:e.onFileConfirm},null,8,["onConfirm"])],2)}],["__scopeId","data-v-3a586c5d"]]);export{g as default};
