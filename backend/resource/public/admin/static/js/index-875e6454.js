import{d as e,a}from"./@vue.runtime-dom-532828a1.js";import{_ as s}from"./logo-d7900de4.js";import{u as o}from"./browser-2d7b7d5f.js";import"./vue-echarts-bffdbdc9.js";import{a as r}from"./element-plus-cc31d756.js";import"./store-acbd10e3.js";import"./index-dd9d36be.js";import{u as t}from"./index-5926ad47.js";import{d as l,e as i,o as p,c as m,W as n,a as u,b as d,J as c,K as v,N as j,al as f,ak as h}from"./@vue.runtime-core-6173334e.js";import{r as g,h as b,u as y}from"./@vue.reactivity-54707199.js";import{_ as w}from"./_plugin-vue_export-helper-1b428a4d.js";import{L as x}from"./@vue.shared-0cc4c744.js";import"./monaco-editor-89e755bd.js";import"./axios-bb93cf32.js";import"./nprogress-27d9be10.js";import"./lodash-es-fd5b777b.js";import"./vue-router-25454f45.js";import"./@vueuse.core-cb7ad152.js";import"./@vueuse.shared-feb01f08.js";import"./pinia-77f7f468.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-005b47e8.js";import"./index.umd.min-b551c2d1.js";import"./vue-21f38777.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@element-plus.icons-vue-2c9f4d7f.js";import"./@popperjs.core-b696b006.js";import"./@ctrl.tinycolor-a951068a.js";import"./dayjs-f8876307.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const _=["innerHTML"],I=["src"],k=l({name:"undefined"}),C=w(l({...k,emits:["update:modelValue","change"],setup(e,{expose:a,emit:s}){const{service:o}=t(),l=g(""),n=g("");function u(){o.base.open.captcha({height:40,width:150}).then((({captchaId:e,data:a})=>{a.includes(";base64,")?l.value=a:n.value=a,s("update:modelValue",e),s("change",{base64:l,svg:n,captchaId:e})})).catch((e=>{r.error(e.message)}))}return i((()=>{u()})),a({refresh:u}),(e,a)=>(p(),m("div",{class:"captcha",onClick:u},[n.value?(p(),m("div",{key:0,class:"svg",innerHTML:n.value},null,8,_)):(p(),m("img",{key:1,class:"base64",src:l.value,alt:""},null,8,I))]))}}),[["__scopeId","data-v-63c69ae6"]]),V=e=>(f("data-v-a4b88592"),e=e(),h(),e),z={class:"page-login"},L={class:"box"},T={class:"logo"},U=V((()=>u("img",{src:s,alt:"Logo"},null,-1))),H=V((()=>u("p",{class:"desc"},"分享AI,畅享AI生活",-1))),K={class:"row"},M=["onKeyup"],A={class:"op"},N=l({name:"login"}),q=w(l({...N,setup(s){const{refs:l,setRefs:i,router:f,service:h}=t(),{user:w,app:_}=o(),I=g(!1),k=b({username:"",password:"",captchaId:"",verifyCode:""});async function V(){if(!k.username)return r.error("用户名不能为空");if(!k.password)return r.error("密码不能为空");if(!k.verifyCode)return r.error("图片验证码不能为空");I.value=!0;try{await h.base.open.login(k).then((e=>{w.setToken(e)})),await Promise.all(_.events.hasToken.map((e=>e()))),f.push("/")}catch(e){l.captcha.refresh(),r.error(e.message)}I.value=!1}return(s,o)=>{const r=n("el-form-item"),t=n("el-button"),l=n("el-form");return p(),m("div",z,[u("div",L,[u("div",T,[U,u("span",null,x(y(_).info.name),1)]),H,d(l,{"label-position":"top",class:"form",disabled:I.value},{default:c((()=>[d(r,{label:"用户名"},{default:c((()=>[v(u("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>k.username=e),placeholder:"请输入用户名",maxlength:"20",autocomplete:"on"},null,512),[[e,k.username]])])),_:1}),d(r,{label:"密码"},{default:c((()=>[v(u("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>k.password=e),type:"password",placeholder:"请输入密码",maxlength:"20",autocomplete:"off"},null,512),[[e,k.password]])])),_:1}),d(r,{label:"验证码"},{default:c((()=>[u("div",K,[v(u("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>k.verifyCode=e),placeholder:"图片验证码",maxlength:"4",onKeyup:a(V,["enter"])},null,40,M),[[e,k.verifyCode]]),d(C,{ref:y(i)("captcha"),modelValue:k.captchaId,"onUpdate:modelValue":o[3]||(o[3]=e=>k.captchaId=e),onChange:o[4]||(o[4]=()=>{k.verifyCode=""})},null,8,["modelValue"])])])),_:1}),u("div",A,[d(t,{round:"",loading:I.value,onClick:V},{default:c((()=>[j("登录")])),_:1},8,["loading"])])])),_:1},8,["disabled"])])])}}}),[["__scopeId","data-v-a4b88592"]]);export{q as default};
