function t(t){return t.split("-")[1]}function e(t){return"y"===t?"height":"width"}function n(t){return t.split("-")[0]}function a(t){return["top","bottom"].includes(n(t))?"x":"y"}function i(i,r,o){let{reference:s,floating:l}=i;const c=s.x+s.width/2-l.width/2,f=s.y+s.height/2-l.height/2,m=a(r),y=e(m),u=s[y]/2-l[y]/2,x="x"===m;let g;switch(n(r)){case"top":g={x:c,y:s.y-l.height};break;case"bottom":g={x:c,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-l.width,y:f};break;default:g={x:s.x,y:s.y}}switch(t(r)){case"start":g[m]-=u*(o&&x?-1:1);break;case"end":g[m]+=u*(o&&x?-1:1)}return g}const r=async(t,e,n)=>{const{placement:a="bottom",strategy:r="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),c=await(null==s.isRTL?void 0:s.isRTL(e));let f=await s.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:y}=i(f,a,c),u=a,x={},g=0;for(let h=0;h<l.length;h++){const{name:n,fn:o}=l[h],{x:p,y:d,data:w,reset:b}=await o({x:m,y:y,initialPlacement:a,placement:u,strategy:r,middlewareData:x,rects:f,platform:s,elements:{reference:t,floating:e}});m=null!=p?p:m,y=null!=d?d:y,x={...x,[n]:{...x[n],...w}},b&&g<=50&&(g++,"object"==typeof b&&(b.placement&&(u=b.placement),b.rects&&(f=!0===b.rects?await s.getElementRects({reference:t,floating:e,strategy:r}):b.rects),({x:m,y:y}=i(f,u,c))),h=-1)}return{x:m,y:y,placement:u,strategy:r,middlewareData:x}};function o(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const s=Math.min,l=Math.max;const c=n=>({name:"arrow",options:n,async fn(i){const{element:r,padding:o=0}=n||{},{x:c,y:f,placement:m,rects:y,platform:u}=i;if(null==r)return{};const x=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(o),g={x:c,y:f},h=a(m),p=e(h),d=await u.getDimensions(r),w="y"===h?"top":"left",b="y"===h?"bottom":"right",A=y.reference[p]+y.reference[h]-g[h]-y.floating[p],R=g[h]-y.reference[h],k=await(null==u.getOffsetParent?void 0:u.getOffsetParent(r));let v=k?"y"===h?k.clientHeight||0:k.clientWidth||0:0;0===v&&(v=y.floating[p]);const L=A/2-R/2,T=x[w],D=v-d[p]-x[b],O=v/2-d[p]/2+L,P=l(T,s(O,D));const E=null!=t(m)&&O!=P&&y.reference[p]/2-(O<T?x[w]:x[b])-d[p]/2<0;return{[h]:g[h]-(E?O<T?T-O:D-O:0),data:{[h]:P,centerOffset:O-P}}}});const f=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(i){const{x:r,y:o}=i,s=await async function(e,i){const{placement:r,platform:o,elements:s}=e,l=await(null==o.isRTL?void 0:o.isRTL(s.floating)),c=n(r),f=t(r),m="x"===a(r),y=["left","top"].includes(c)?-1:1,u=l&&m?-1:1,x="function"==typeof i?i(e):i;let{mainAxis:g,crossAxis:h,alignmentAxis:p}="number"==typeof x?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...x};return f&&"number"==typeof p&&(h="end"===f?-1*p:p),m?{x:h*u,y:g*y}:{x:g*y,y:h*u}}(i,e);return{x:r+s.x,y:o+s.y,data:s}}}};export{c as a,r as c,f as o,o as r};
